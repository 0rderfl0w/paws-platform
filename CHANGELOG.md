# CHANGELOG — capapvl.pt

## 2026-02-25 (Session 6 — Admin Testing & Enhancements)
- Admin: Added size, sex, and status (available/adopted) filter dropdowns to dashboard (Crash & Burn)
- Admin: Replaced plain description textarea with structured form fields: subtitle/personality, breed, entry date, story, sociability (4 dropdowns), medical checkboxes (Crash & Burn)
- Admin: Form auto-generates description in DogProfile parser format; reverse-parses on edit (Crash & Burn)
- Admin: Moved personality field under name, relabeled as "Subtítulo (personalidade)" for shelter staff clarity (Crash & Burn)
- Assets: Downloaded CAPA logo from original site (110px JPEG), created SVG recreation draft (Crash & Burn)
- Task: PROMPT.md removed per Z's request, SPEC.md and AUDIT.md retained (Crash & Burn)

## 2026-02-25 (Session 5 — Polish Pass)
- SEO: Updated `src/layouts/Layout.astro` to support `ogImage`, `ogUrl`, `noindex` props; all pages now emit full Open Graph meta tags (og:type, og:title, og:description, og:image, og:url, og:locale, og:site_name) (Crash & Burn)
- SEO: Updated per-page descriptions to match spec on all 6 public pages (index, caes, sobre-nos, ajudar, adocao, cao) (Crash & Burn)
- SEO: Admin page now emits `<meta name="robots" content="noindex, nofollow">` with no OG tags (Crash & Burn)
- 404: Created `src/pages/404.astro` — friendly Portuguese "Página não encontrada" page with paw print icon, warm earth-tone palette, Nav + Footer, CTAs to homepage and dog listings (Crash & Burn)
- Favicon: `public/favicon.svg` is the Astro default logo (not CAPA branding) — Z should provide a real CAPA logo SVG to replace it (Crash & Burn)
- Build: 8 pages, 0 errors, 942ms (Crash & Burn)

## 2026-02-25
- Scraped 8 images from original https://capapvl.pt/sobre_nos into `public/images/sobre-nos/` (Crash & Burn)
- Scraped 10 images from original https://capapvl.pt/ajudar into `public/images/ajudar/` (Crash & Burn)
- Resized 5 images over 500KB using sharp (max 1200px wide, 80% JPEG quality) (Crash & Burn)
- `/sobre-nos` page: replaced placeholder with real community photo, added 2 rescued-dog photos to rehab section, added Zeus success story photo with caption overlay (Crash & Burn)
- `/ajudar` page: added 3-photo volunteer strip to volunteering section, added dog fostering photo to FAT section (Crash & Burn)
- Build passes clean: 7 pages, 0 errors, 910ms (Crash & Burn)

## 2026-02-24 (Session 3)
- Built `/admin` page: full admin panel behind Supabase email/password auth (Crash & Burn)
  - `src/pages/admin.astro` — Astro page wrapper
  - `src/components/AdminPanel.tsx` — React island (client:load) with all admin functionality
- Admin panel features: login/logout, dog dashboard (search, all dogs incl. adopted), add new dog with photo upload, edit dog with photo management (view/delete/upload), toggle adopted status inline, delete dog with confirmation dialog (Crash & Burn)
- Photo upload convention preserved: slug from name (strip accents), photo-01 then photo-03 onwards (skip photo-02 slot) (Crash & Burn)
- Portuguese UI labels throughout: Entrar, Sair, Adicionar Cão, Editar, Eliminar, Adotado, Disponível, etc. (Crash & Burn)
- Design: warm earth-tone palette consistent with site, TW4 classes, rounded corners, responsive table (Crash & Burn)
- Build: 7 pages (6 existing + admin), 0 errors, 852ms (Crash & Burn)

## 2026-02-24 (Session 2)
- Connected Supabase project (amkwoeepuhlnjmybbnbo), applied migration via SQL Editor: dogs table, RLS policies, dog-photos storage bucket (Crash & Burn)
- Uploaded all 104 dogs + ~980 photos to Supabase (resized 1200px/80% JPEG via sharp). Scripts: upload-dogs.ts, upload-missing.ts (Crash & Burn)
- Scraped descriptions from all 104 dog pages on original site → dogs-descriptions.json (99 with content, 5 empty) (Crash & Burn)
- Pushed descriptions to Supabase dogs table (Crash & Burn)
- Added `sex` column to dogs table, populated from descriptions (44 male, 55 female, 5 unknown) (Crash & Burn)
- Deleted 104 CAPA logo images from storage (were scraped as photo-02 in every dog folder, ~10KB each) (Crash & Burn)
- Built `/cao` dog profile page: full-width photo gallery with thumbnails, parsed structured description (story, info grid, sociability tags), adoption CTA with email link (Crash & Burn)
- Redesigned dog profile layout: photos on top, big name, personality quote, "A Minha História" card, "Sobre Mim" grid, "Compatibilidade" tags (Crash & Burn)
- Added sex filter to `/caes`: ♀ Fêmea / ♂ Macho, works in conjunction with size filter (Crash & Burn)
- Made dog cards fully clickable (removed separate "Conhecer" link) on both `/caes` and homepage (Crash & Burn)
- Updated Dog type with `sex` field (Crash & Burn)
- Updated PROJECT.md with full current state: Supabase schema, data stats, gotchas, env vars, remaining work (Crash & Burn)
- 6 pages build clean: `bun run build` — 842ms (Crash & Burn)

## 2026-02-24 (Session 1)
- Built `/caes` page: DogListings React island with size filter tabs, name search, results count, responsive grid, loading skeletons, seed data fallback (Crash & Burn)
- Built `/sobre-nos` page: hero, Stats reuse, 3 principles cards, community/schools, rescue & rehab, success stories CTA (Crash & Burn)
- Built `/ajudar` page: Donativos em Género (4 cards), Doação de Tempo (4 volunteer cards), FAT foster section, Donativos Monetários with IBAN + MBWay + PayPal (Crash & Burn)
- Built `/adocao` page: 6 benefits grid, 6-step adoption timeline, 3 pricing cards (Fêmea 75€/Macho 65€/Bebé 30€), success stories (Crash & Burn)
- Updated Nav with Adoção link, Footer with real contact info (capa.geralpvl@gmail.com, EN310 115 address, IBAN) (Crash & Burn)
- Expanded seed data to 12 real dogs from shelter (4 per size) with real names/ages/descriptions (Crash & Burn)
- Created Supabase migration: dogs table + RLS policies + dog-photos storage bucket (Crash & Burn)
- Scraped 104 dogs (1,083 photos) from existing site into organized folders (Crash & Burn)
- Scraped page content from /adocao, /sobre_nos, /ajudar for reference (Crash & Burn)
- All 5 pages build clean: `bun run build` — 662ms (Crash & Burn)

## 2025-07-26
- Scaffolded Astro 5 project with React 19, Tailwind CSS 4, Supabase client, Bun runtime (Crash & Burn)
- Note: Astro 5's official integration installs TW4 (not TW3). Using TW4 with CSS-first config — correct for new projects (Crash & Burn)
- Set up Supabase client lib, Dog type, seed data for 6 dogs (2 per size category) (Crash & Burn)
- Created warm earth-tone color palette: primary (orange), warm (brown), nature (green) (Crash & Burn)
- Built all 8 landing page sections: Nav (sticky + mobile hamburger), Hero, Stats (animated counters with IntersectionObserver), WhyAdopt (3 benefit cards), FeaturedDogs (React island with Supabase fetch + seed fallback + size filter tabs), AboutBlurb, HelpCta, Footer (Crash & Burn)
- FeaturedDogs uses client:visible for lazy loading, loading skeletons, empty states (Crash & Burn)
- `bun run build` clean — zero errors (Crash & Burn)
- Init git repo (Crash & Burn)

## 2026-02-24
- Project created. Stack: Astro 5 + React 19 + Tailwind 3 + Supabase + Bun. Hosted on Hostinger. (Crash & Burn)
- Researched current capapvl.pt site structure — hero, stats, why adopt, dog listings by size, about, help/FAT program (Crash & Burn)
- Created landing-page task spec (Crash & Burn)
