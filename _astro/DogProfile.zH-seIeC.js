import{j as e,s as p}from"./supabase.BjDmEivz.js";import{r as x}from"./index.DiEladB3.js";const k={small:"Pequeno",medium:"M√©dio",large:"Grande"},z={small:"bg-nature-100 text-nature-700 border border-nature-200",medium:"bg-primary-100 text-primary-700 border border-primary-200",large:"bg-warm-100 text-warm-700 border border-warm-200"};function L(a){const i=a.split(`
`).filter(Boolean),s=[];let t="",d="";for(const o of i){const u=o.match(/^([^:]+):\s*(.+)$/);if(u){const[,r,c]=u,n=r.trim().toLowerCase();n==="hist√≥ria"?t=c.trim():n==="personalidade"?d=c.trim():n.startsWith("soci√°vel")||n.startsWith("n√£o sabemos")||n.startsWith("chipado")||n.startsWith("vacinado")||n.startsWith("esterilizado")?s.push({label:r.trim(),value:c.trim()}):s.push({label:r.trim(),value:c.trim()})}else{const r=o.trim();r.startsWith("Soci√°vel")||r.startsWith("N√£o sabemos")?s.push({label:"‚úì",value:r}):r.match(/^(Chipado|Vacinado|Esterilizado)/)?s.push({label:"üè•",value:r}):r&&(t=t?`${t} ${r}`:r)}}return{fields:s,story:t,personality:d}}function E({text:a}){const i=a.startsWith("Soci√°vel")||a.startsWith("Chipado")||a.startsWith("Vacinado")||a.startsWith("Esterilizado"),s=a.startsWith("N√£o sabemos");return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ${i?"bg-nature-50 text-nature-700 border border-nature-200":s?"bg-warm-50 text-warm-500 border border-warm-200":"bg-warm-50 text-warm-600 border border-warm-200"}`,children:[i&&"‚úì"," ",a]})}function $({photos:a,name:i}){const[s,t]=x.useState(0);return a.length===0?null:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-[16/10] md:aspect-[16/9] rounded-2xl overflow-hidden bg-warm-100 shadow-lg",children:[e.jsx("img",{src:a[s],alt:`Foto de ${i}`,className:"w-full h-full object-cover"}),a.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>t((s-1+a.length)%a.length),className:"absolute left-4 top-1/2 -translate-y-1/2 w-11 h-11 rounded-full bg-white/80 backdrop-blur-sm shadow-lg flex items-center justify-center hover:bg-white transition-colors","aria-label":"Foto anterior",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-warm-700",children:e.jsx("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})}),e.jsx("button",{onClick:()=>t((s+1)%a.length),className:"absolute right-4 top-1/2 -translate-y-1/2 w-11 h-11 rounded-full bg-white/80 backdrop-blur-sm shadow-lg flex items-center justify-center hover:bg-white transition-colors","aria-label":"Foto seguinte",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-warm-700",children:e.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/50 text-white text-sm px-3 py-1.5 rounded-full backdrop-blur-sm",children:[s+1," / ",a.length]})]})]}),a.length>1&&e.jsx("div",{className:"flex gap-2.5 overflow-x-auto pb-2",children:a.map((d,o)=>e.jsx("button",{onClick:()=>t(o),className:`flex-shrink-0 w-20 h-20 md:w-24 md:h-24 rounded-xl overflow-hidden border-2 transition-all ${o===s?"border-primary-500 shadow-md ring-2 ring-primary-200":"border-warm-200 hover:border-warm-400 opacity-70 hover:opacity-100"}`,"aria-label":`Ver foto ${o+1} de ${i}`,children:e.jsx("img",{src:d,alt:"",className:"w-full h-full object-cover",loading:"lazy"})},o))})]})}function W(){return e.jsxs("div",{className:"max-w-3xl mx-auto animate-pulse space-y-6",children:[e.jsx("div",{className:"aspect-[16/10] rounded-2xl bg-warm-200"}),e.jsx("div",{className:"h-10 bg-warm-200 rounded-lg w-48"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-warm-200 rounded w-full"}),e.jsx("div",{className:"h-4 bg-warm-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-warm-200 rounded w-3/4"})]})]})}function B(){return e.jsxs("div",{className:"max-w-3xl mx-auto text-center py-20",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üêæ"}),e.jsx("h1",{className:"text-2xl font-bold text-warm-900 mb-2",children:"C√£o n√£o encontrado"}),e.jsx("p",{className:"text-warm-600 mb-8",children:"Este c√£o pode j√° ter encontrado um lar!"}),e.jsx("a",{href:"/caes",className:"inline-flex items-center gap-2 bg-primary-500 hover:bg-primary-600 text-white font-semibold px-6 py-3 rounded-xl transition-colors",children:"Ver todos os c√£es"})]})}function P(){const[a,i]=x.useState(null),[s,t]=x.useState([]),[d,o]=x.useState(!0),[u,r]=x.useState(!1);if(x.useEffect(()=>{async function l(){const v=new URLSearchParams(window.location.search).get("id");if(!v||!p){r(!0),o(!1);return}const{data:h,error:y}=await p.from("dogs").select("*").eq("id",v).single();if(y||!h){r(!0),o(!1);return}i(h);const N=h.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-"),{data:g}=await p.storage.from("dog-photos").list(N,{limit:50,sortBy:{column:"name",order:"asc"}});if(g&&g.length>0){const S=g.filter(w=>/\.(jpe?g|png|webp)$/i.test(w.name)).map(w=>{const{data:C}=p.storage.from("dog-photos").getPublicUrl(`${N}/${w.name}`);return C.publicUrl});t(S)}else h.photo_url&&t([h.photo_url]);o(!1)}l()},[]),d)return e.jsx(W,{});if(u||!a)return e.jsx(B,{});const c=k[a.size]??a.size,n=z[a.size]??"",m=a.description?L(a.description):null,f=m?.fields.filter(l=>l.label!=="‚úì"&&l.label!=="üè•")??[],j=m?.fields.filter(l=>l.label==="‚úì"||l.label==="üè•")??[];return e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("nav",{className:"mb-6 flex items-center gap-2 text-sm text-warm-500","aria-label":"Breadcrumb",children:[e.jsx("a",{href:"/",className:"hover:text-primary-600 transition-colors",children:"In√≠cio"}),e.jsx("span",{"aria-hidden":"true",children:"/"}),e.jsx("a",{href:"/caes",className:"hover:text-primary-600 transition-colors",children:"C√£es"}),e.jsx("span",{"aria-hidden":"true",children:"/"}),e.jsx("span",{className:"text-warm-700 font-medium",children:a.name})]}),e.jsx($,{photos:s,name:a.name}),e.jsxs("div",{className:"mt-8 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-warm-900",children:a.name}),e.jsx("span",{className:`px-4 py-1.5 rounded-full text-sm font-bold ${n}`,children:c})]}),m?.personality&&e.jsxs("p",{className:"text-lg text-warm-600 italic mt-2",children:['"',m.personality,'"']})]}),m?.story&&e.jsxs("div",{className:"mb-8 bg-warm-50 border border-warm-200 rounded-2xl p-6",children:[e.jsx("h2",{className:"text-sm font-bold text-warm-500 uppercase tracking-wider mb-3",children:"A Minha Hist√≥ria"}),e.jsx("p",{className:"text-warm-700 leading-relaxed text-base",children:m.story})]}),f.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-sm font-bold text-warm-500 uppercase tracking-wider mb-4",children:"Sobre Mim"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:f.map((l,b)=>e.jsxs("div",{className:"bg-white border border-warm-200 rounded-xl p-4",children:[e.jsx("dt",{className:"text-xs font-semibold text-warm-400 uppercase tracking-wider mb-1",children:l.label}),e.jsx("dd",{className:"text-warm-900 font-medium",children:l.value})]},b))})]}),j.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-sm font-bold text-warm-500 uppercase tracking-wider mb-4",children:"Compatibilidade"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.map((l,b)=>e.jsx(E,{text:l.value},b))})]}),e.jsxs("div",{className:"mb-8 bg-primary-50 border border-primary-200 rounded-2xl p-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-warm-900 mb-3",children:["Queres adotar o/a ",a.name,"?"]}),e.jsx("p",{className:"text-warm-600 leading-relaxed mb-6",children:"Entra em contacto connosco para saber mais sobre o processo de ado√ß√£o. Ficaremos felizes em ajudar-te a encontrar o teu novo melhor amigo!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:`mailto:capa.geralpvl@gmail.com?subject=Ado√ß√£o ‚Äî ${a.name}`,className:"inline-flex items-center justify-center gap-2 bg-primary-500 hover:bg-primary-600 text-white font-semibold px-6 py-3.5 rounded-xl transition-colors shadow-sm",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:[e.jsx("path",{d:"M3 4a2 2 0 00-2 2v1.161l8.441 4.221a1.25 1.25 0 001.118 0L19 7.162V6a2 2 0 00-2-2H3z"}),e.jsx("path",{d:"M19 8.839l-7.616 3.808a2.75 2.75 0 01-2.768 0L1 8.839V14a2 2 0 002 2h14a2 2 0 002-2V8.839z"})]}),"Enviar email"]}),e.jsx("a",{href:"/adocao",className:"inline-flex items-center justify-center gap-2 bg-white hover:bg-warm-50 text-warm-700 font-semibold px-6 py-3.5 rounded-xl border border-warm-300 transition-colors",children:"Processo de ado√ß√£o"})]})]}),e.jsx("div",{className:"pt-6 pb-4 border-t border-warm-200",children:e.jsxs("a",{href:"/caes",className:"inline-flex items-center gap-2 text-primary-600 hover:text-primary-700 font-semibold transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z",clipRule:"evenodd"})}),"Ver todos os c√£es"]})})]})}export{P as default};
