import{j as e,g as m,s as f}from"./index.lIjAxXKV.js";import{r as p}from"./index.DiEladB3.js";const $={small:"bg-nature-100 text-nature-700 border border-nature-200",medium:"bg-primary-100 text-primary-700 border border-primary-200",large:"bg-warm-100 text-warm-700 border border-warm-200"};function D(a){const r=a.split(`
`).filter(Boolean),s=[];let t="",l="";for(const i of r){const d=i.match(/^([^:]+):\s*(.+)$/);if(d){const[,o,h]=d,c=o.trim().toLowerCase();c==="histÃ³ria"?t=h.trim():c==="personalidade"?l=h.trim():c.startsWith("sociÃ¡vel")||c.startsWith("nÃ£o sabemos")||c.startsWith("chipado")||c.startsWith("vacinado")||c.startsWith("esterilizado")?s.push({label:o.trim(),value:h.trim()}):s.push({label:o.trim(),value:h.trim()})}else{const o=i.trim();o.startsWith("SociÃ¡vel")||o.startsWith("NÃ£o sabemos")?s.push({label:"âœ“",value:o}):o.match(/^(Chipado|Vacinado|Esterilizado)/)?s.push({label:"ðŸ¥",value:o}):o&&(t=t?`${t} ${o}`:o)}}return{fields:s,story:t,personality:l}}function L(a,r,s){if(s==="pt")return{label:a,value:r};const t=m("pt").admin,l=m(s).admin,i=m("pt").sizes,d=m(s).sizes,o={[t.descSex]:l.descSex,[t.descAge]:l.descAge,[t.descEntryDate]:l.descEntryDate,[t.descBreed]:l.descBreed,[t.descSize]:l.descSize,[t.descPersonality]:l.descPersonality,[t.descStory]:l.descStory},h={[t.descSexMale]:l.descSexMale,[t.descSexFemale]:l.descSexFemale,[i.small]:d.small,[i.medium]:d.medium,[i.large]:d.large};return{label:o[a]??a,value:h[r]??r}}function U(a,r){if(r==="pt")return a;const s=m("pt").admin,t=m(r).admin,l={[s.descGoodWithPeople]:t.descGoodWithPeople,[s.descNotGoodWithPeople]:t.descNotGoodWithPeople,[s.descUnknownPeople]:t.descUnknownPeople,[s.descGoodWithMales]:t.descGoodWithMales,[s.descNotGoodWithMales]:t.descNotGoodWithMales,[s.descUnknownMales]:t.descUnknownMales,[s.descGoodWithFemales]:t.descGoodWithFemales,[s.descNotGoodWithFemales]:t.descNotGoodWithFemales,[s.descUnknownFemales]:t.descUnknownFemales,[s.descGoodWithCats]:t.descGoodWithCats,[s.descNotGoodWithCats]:t.descNotGoodWithCats,[s.descUnknownCats]:t.descUnknownCats,[s.descChipped]:t.descChipped,[s.descVaccinated]:t.descVaccinated,[s.descSterilized]:t.descSterilized},i=a.split(",").map(d=>d.trim());return i.length>1&&i.every(d=>l[d])?i.map(d=>l[d]).join(", "):l[a]??a}function B({text:a,locale:r}){const s=U(a,r),t=a.startsWith("SociÃ¡vel")||a.startsWith("Chipado")||a.startsWith("Vacinado")||a.startsWith("Esterilizado"),l=a.startsWith("NÃ£o sabemos");return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ${t?"bg-nature-50 text-nature-700 border border-nature-200":l?"bg-warm-50 text-warm-500 border border-warm-200":"bg-warm-50 text-warm-600 border border-warm-200"}`,children:[t&&"âœ“"," ",s]})}function E({photos:a,name:r,locale:s}){const t=m(s),[l,i]=p.useState(0);return a.length===0?null:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-[16/10] md:aspect-[16/9] rounded-2xl overflow-hidden bg-warm-100 shadow-lg",children:[e.jsx("img",{src:a[l],alt:`${t.dogProfile.breadcrumbDogs} ${r}`,className:"w-full h-full object-cover"}),a.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i((l-1+a.length)%a.length),className:"absolute left-4 top-1/2 -translate-y-1/2 w-11 h-11 rounded-full bg-white/80 backdrop-blur-sm shadow-lg flex items-center justify-center hover:bg-white transition-colors","aria-label":t.dogProfile.prevPhoto,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-warm-700",children:e.jsx("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})}),e.jsx("button",{onClick:()=>i((l+1)%a.length),className:"absolute right-4 top-1/2 -translate-y-1/2 w-11 h-11 rounded-full bg-white/80 backdrop-blur-sm shadow-lg flex items-center justify-center hover:bg-white transition-colors","aria-label":t.dogProfile.nextPhoto,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-warm-700",children:e.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/50 text-white text-sm px-3 py-1.5 rounded-full backdrop-blur-sm",children:[l+1," / ",a.length]})]})]}),a.length>1&&e.jsx("div",{className:"flex gap-2.5 overflow-x-auto pb-2",children:a.map((d,o)=>e.jsx("button",{onClick:()=>i(o),className:`flex-shrink-0 w-20 h-20 md:w-24 md:h-24 rounded-xl overflow-hidden border-2 transition-all ${o===l?"border-primary-500 shadow-md ring-2 ring-primary-200":"border-warm-200 hover:border-warm-400 opacity-70 hover:opacity-100"}`,"aria-label":`${t.dogProfile.viewPhoto} ${o+1} ${r}`,children:e.jsx("img",{src:d,alt:"",className:"w-full h-full object-cover",loading:"lazy"})},o))})]})}function T(){return e.jsxs("div",{className:"max-w-3xl mx-auto animate-pulse space-y-6",children:[e.jsx("div",{className:"aspect-[16/10] rounded-2xl bg-warm-200"}),e.jsx("div",{className:"h-10 bg-warm-200 rounded-lg w-48"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-warm-200 rounded w-full"}),e.jsx("div",{className:"h-4 bg-warm-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-warm-200 rounded w-3/4"})]})]})}function R({locale:a}){const r=m(a),s=a==="pt"?"/caes":"/en/dogs";return e.jsxs("div",{className:"max-w-3xl mx-auto text-center py-20",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ¾"}),e.jsx("h1",{className:"text-2xl font-bold text-warm-900 mb-2",children:r.dogProfile.notFoundTitle}),e.jsx("p",{className:"text-warm-600 mb-8",children:r.dogProfile.notFoundDesc}),e.jsx("a",{href:s,className:"inline-flex items-center gap-2 bg-primary-500 hover:bg-primary-600 text-white font-semibold px-6 py-3 rounded-xl transition-colors",children:r.dogProfile.viewAllDogs})]})}function V({locale:a="pt"}){const r=m(a),[s,t]=p.useState(null),[l,i]=p.useState([]),[d,o]=p.useState(!0),[h,c]=p.useState(!1),z=a==="pt"?"/":"/en/",v=a==="pt"?"/caes":"/en/dogs",S=a==="pt"?"/adocao":"/en/adopt",W={small:r.sizes.small,medium:r.sizes.medium,large:r.sizes.large};if(p.useEffect(()=>{async function n(){const u=new URLSearchParams(window.location.search).get("id");if(!u||!f){c(!0),o(!1);return}const{data:g,error:G}=await f.from("dogs").select("*").eq("id",u).single();if(G||!g){c(!0),o(!1);return}t(g);const P=g.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-"),{data:w}=await f.storage.from("dog-photos").list(P,{limit:50,sortBy:{column:"name",order:"asc"}});if(w&&w.length>0){const F=w.filter(j=>/\.(jpe?g|png|webp)$/i.test(j.name)).map(j=>{const{data:M}=f.storage.from("dog-photos").getPublicUrl(`${P}/${j.name}`);return M.publicUrl});i(F)}else g.photo_url&&i([g.photo_url]);o(!1)}n()},[]),d)return e.jsx(T,{});if(h||!s)return e.jsx(R,{locale:a});const k=W[s.size]??s.size,C=$[s.size]??"",x=s.description?D(s.description):null,N=x?.fields.filter(n=>n.label!=="âœ“"&&n.label!=="ðŸ¥")??[],y=x?.fields.filter(n=>n.label==="âœ“"||n.label==="ðŸ¥")??[];return e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("nav",{className:"mb-6 flex items-center gap-2 text-sm text-warm-500","aria-label":"Breadcrumb",children:[e.jsx("a",{href:z,className:"hover:text-primary-600 transition-colors",children:r.dogProfile.breadcrumbHome}),e.jsx("span",{"aria-hidden":"true",children:"/"}),e.jsx("a",{href:v,className:"hover:text-primary-600 transition-colors",children:r.dogProfile.breadcrumbDogs}),e.jsx("span",{"aria-hidden":"true",children:"/"}),e.jsx("span",{className:"text-warm-700 font-medium",children:s.name})]}),e.jsx(E,{photos:l,name:s.name,locale:a}),e.jsxs("div",{className:"mt-8 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-warm-900",children:s.name}),e.jsx("span",{className:`px-4 py-1.5 rounded-full text-sm font-bold ${C}`,children:k})]}),x?.personality&&e.jsxs("p",{className:"text-lg text-warm-600 italic mt-2",children:['"',x.personality,'"']})]}),x?.story&&e.jsxs("div",{className:"mb-8 bg-warm-50 border border-warm-200 rounded-2xl p-6",children:[e.jsx("h2",{className:"text-sm font-bold text-warm-500 uppercase tracking-wider mb-3",children:r.dogProfile.storyHeading}),e.jsx("p",{className:"text-warm-700 leading-relaxed text-base",children:x.story})]}),N.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-sm font-bold text-warm-500 uppercase tracking-wider mb-4",children:r.dogProfile.aboutHeading}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:N.map((n,b)=>{const u=L(n.label,n.value,a);return e.jsxs("div",{className:"bg-white border border-warm-200 rounded-xl p-4",children:[e.jsx("dt",{className:"text-xs font-semibold text-warm-400 uppercase tracking-wider mb-1",children:u.label}),e.jsx("dd",{className:"text-warm-900 font-medium",children:u.value})]},b)})})]}),y.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-sm font-bold text-warm-500 uppercase tracking-wider mb-4",children:r.dogProfile.compatibilityHeading}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((n,b)=>e.jsx(B,{text:n.value,locale:a},b))})]}),e.jsxs("div",{className:"mb-8 bg-primary-50 border border-primary-200 rounded-2xl p-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-warm-900 mb-3",children:[r.dogProfile.adoptTitle," ",s.name,"?"]}),e.jsx("p",{className:"text-warm-600 leading-relaxed mb-6",children:r.dogProfile.adoptDesc}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:`mailto:capa.geralpvl@gmail.com?subject=${r.dogProfile.emailSubject} â€” ${s.name}`,className:"inline-flex items-center justify-center gap-2 bg-primary-500 hover:bg-primary-600 text-white font-semibold px-6 py-3.5 rounded-xl transition-colors shadow-sm",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:[e.jsx("path",{d:"M3 4a2 2 0 00-2 2v1.161l8.441 4.221a1.25 1.25 0 001.118 0L19 7.162V6a2 2 0 00-2-2H3z"}),e.jsx("path",{d:"M19 8.839l-7.616 3.808a2.75 2.75 0 01-2.768 0L1 8.839V14a2 2 0 002 2h14a2 2 0 002-2V8.839z"})]}),r.dogProfile.sendEmail]}),e.jsx("a",{href:S,className:"inline-flex items-center justify-center gap-2 bg-white hover:bg-warm-50 text-warm-700 font-semibold px-6 py-3.5 rounded-xl border border-warm-300 transition-colors",children:r.dogProfile.adoptionProcess})]})]}),e.jsx("div",{className:"pt-6 pb-4 border-t border-warm-200",children:e.jsxs("a",{href:v,className:"inline-flex items-center gap-2 text-primary-600 hover:text-primary-700 font-semibold transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z",clipRule:"evenodd"})}),r.dogProfile.viewAllDogs]})})]})}export{V as default};
