import{s as m,j as e,g as I}from"./index.lIjAxXKV.js";import{r as x}from"./index.DiEladB3.js";function B(n){return n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-")}function q(n){return n===0?1:n+2}function O(n){return`photo-${String(n).padStart(2,"0")}.jpg`}const H={name:"",size:"medium",sex:"",age:"",description:"",personality:"",story:"",breed:"",entryDate:"",socHumans:"unknown",socMales:"unknown",socFemales:"unknown",socCats:"unknown",chipped:!1,vaccinated:!1,sterilized:!1};function Y(n,t){const l=[],o={male:t.admin.descSexMale,female:t.admin.descSexFemale},r={small:t.sizes.small,medium:t.sizes.medium,large:t.sizes.large},s=o[n.sex];s&&l.push(`${t.admin.descSex}: ${s}`),n.age&&l.push(`${t.admin.descAge}: ${n.age}`),n.entryDate&&l.push(`${t.admin.descEntryDate}: ${n.entryDate}`),n.breed&&l.push(`${t.admin.descBreed}: ${n.breed}`),l.push(`${t.admin.descSize}: ${r[n.size]??n.size}`),n.personality&&l.push(`${t.admin.descPersonality}: ${n.personality}`),n.socHumans==="yes"?l.push(t.admin.descGoodWithPeople):n.socHumans==="no"?l.push(t.admin.descNotGoodWithPeople):l.push(t.admin.descUnknownPeople),n.socMales==="yes"?l.push(t.admin.descGoodWithMales):n.socMales==="no"?l.push(t.admin.descNotGoodWithMales):l.push(t.admin.descUnknownMales),n.socFemales==="yes"?l.push(t.admin.descGoodWithFemales):n.socFemales==="no"?l.push(t.admin.descNotGoodWithFemales):l.push(t.admin.descUnknownFemales),n.socCats==="yes"?l.push(t.admin.descGoodWithCats):n.socCats==="no"?l.push(t.admin.descNotGoodWithCats):l.push(t.admin.descUnknownCats);const c=[];return n.chipped&&c.push(t.admin.descChipped),n.vaccinated&&c.push(t.admin.descVaccinated),n.sterilized&&c.push(t.admin.descSterilized),c.length>0&&l.push(c.join(", ")),n.story&&l.push(`${t.admin.descStory}: ${n.story}`),l.join(`
`)}function J(n,t,l){const o={...t},r=n.split(`
`).filter(Boolean),s=[],c=l.admin.descPersonality.toLowerCase(),f=l.admin.descStory.toLowerCase(),u=l.admin.descBreed.toLowerCase(),w=l.admin.descEntryDate.toLowerCase();for(const N of r){const g=N.match(/^([^:]+):\s*(.+)$/);if(g){const d=g[1].trim().toLowerCase(),v=g[2].trim();d===c?o.personality=v:d===f?o.story=v:d===u?o.breed=v:d===w&&(o.entryDate=v)}else{const d=N.trim();d===l.admin.descGoodWithPeople?o.socHumans="yes":d===l.admin.descNotGoodWithPeople?o.socHumans="no":d===l.admin.descUnknownPeople?o.socHumans="unknown":d===l.admin.descGoodWithMales?o.socMales="yes":d===l.admin.descNotGoodWithMales?o.socMales="no":d===l.admin.descUnknownMales?o.socMales="unknown":d===l.admin.descGoodWithFemales?o.socFemales="yes":d===l.admin.descNotGoodWithFemales?o.socFemales="no":d===l.admin.descUnknownFemales?o.socFemales="unknown":d===l.admin.descGoodWithCats?o.socCats="yes":d===l.admin.descNotGoodWithCats?o.socCats="no":d===l.admin.descUnknownCats?o.socCats="unknown":d.includes(l.admin.descChipped)||d.includes(l.admin.descVaccinated)||d.includes(l.admin.descSterilized)?(d.includes(l.admin.descChipped)&&(o.chipped=!0),d.includes(l.admin.descVaccinated)&&(o.vaccinated=!0),d.includes(l.admin.descSterilized)&&(o.sterilized=!0)):s.push(d)}}return s.length>0&&!o.story&&(o.story=s.join(" ")),o}function F({size:n="sm"}){const t=n==="lg"?"h-8 w-8":"h-4 w-4";return e.jsxs("svg",{className:`${t} animate-spin text-current`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})}function K({onLogin:n,t}){const[l,o]=x.useState(""),[r,s]=x.useState(""),[c,f]=x.useState(""),[u,w]=x.useState(!1);async function N(g){if(g.preventDefault(),!!m){f(""),w(!0);try{const{error:d}=await m.auth.signInWithPassword({email:l,password:r});d?f(t.admin.loginError):n()}catch{f(t.admin.loginGenericError)}finally{w(!1)}}}return e.jsx("div",{className:"min-h-screen bg-warm-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-100 rounded-2xl mb-4",children:e.jsx("span",{className:"text-3xl",children:"ðŸ¾"})}),e.jsx("h1",{className:"text-2xl font-bold text-warm-900",children:"CAPA PVL"}),e.jsx("p",{className:"text-warm-500 text-sm mt-1",children:t.admin.loginTitle})]}),e.jsxs("form",{onSubmit:N,className:"bg-white rounded-2xl shadow-sm border border-warm-200 p-8 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-warm-700 mb-1.5",children:t.admin.emailLabel}),e.jsx("input",{id:"email",type:"email",value:l,onChange:g=>o(g.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400 transition-colors",placeholder:"admin@capapvl.pt"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-warm-700 mb-1.5",children:t.admin.passwordLabel}),e.jsx("input",{id:"password",type:"password",value:r,onChange:g=>s(g.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400 transition-colors",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),c&&e.jsx("p",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-xl px-4 py-3",children:c}),e.jsxs("button",{type:"submit",disabled:u,className:"w-full flex items-center justify-center gap-2 bg-primary-500 hover:bg-primary-600 disabled:opacity-60 text-white font-semibold py-3 rounded-xl transition-colors",children:[u?e.jsx(F,{}):null,u?t.admin.loggingIn:t.admin.loginButton]})]})]})})}function G({initial:n,existingDog:t,onSave:l,onCancel:o,t:r}){const[s,c]=x.useState(n),[f,u]=x.useState([]),[w,N]=x.useState([]),[g,d]=x.useState(null),[v,k]=x.useState(!1),[D,P]=x.useState(""),S=x.useRef(null),j=!!t;x.useEffect(()=>{!j||!m||!t||C(B(t.name))},[j,t]);async function C(i){if(!m)return;const{data:h,error:p}=await m.storage.from("dog-photos").list(i,{sortBy:{column:"name",order:"asc"}});if(p||!h)return;const $=h.filter(z=>z.name.endsWith(".jpg")||z.name.endsWith(".jpeg")||z.name.endsWith(".png")||z.name.endsWith(".webp")).map(z=>{const a=`${i}/${z.name}`,{data:y}=m.storage.from("dog-photos").getPublicUrl(a);return{path:a,url:y.publicUrl}});N($)}async function A(i){if(m){d(i);try{await m.storage.from("dog-photos").remove([i]),N(h=>h.filter(p=>p.path!==i))}finally{d(null)}}}async function _(i){if(i.preventDefault(),!!m){P(""),k(!0);try{const h=B(s.name||(t?.name??""));let p=t?.photo_url??"";if(f.length>0){let a=0;if(j){const b=w.map(L=>{const E=L.path.match(/photo-(\d+)\./);return E?parseInt(E[1],10):0}),M=b.length>0?Math.max(...b):0;M===0?a=0:M===1?a=1:a=M-1}const y=[];for(let b=0;b<f.length;b++){const M=a+b,L=q(M),E=O(L),R=`${h}/${E}`,U=f[b],{error:V}=await m.storage.from("dog-photos").upload(R,U,{upsert:!0,contentType:U.type||"image/jpeg"});if(!V){const{data:T}=m.storage.from("dog-photos").getPublicUrl(R);y.push(T.publicUrl)}}(y.length>0&&!p||y.length>0&&!j)&&(p=y[0])}if(j){!w.find(y=>y.url===p)&&!p.includes(h)&&(p=w.length>0?w[0].url:"");const{data:a}=await m.storage.from("dog-photos").list(h,{sortBy:{column:"name",order:"asc"}});if(a&&a.length>0){const y=a.find(b=>b.name.endsWith(".jpg")||b.name.endsWith(".jpeg")||b.name.endsWith(".png")||b.name.endsWith(".webp"));if(y&&!p){const{data:b}=m.storage.from("dog-photos").getPublicUrl(`${h}/${y.name}`);p=b.publicUrl}}}const $=Y(s,r),z={name:s.name,size:s.size,sex:s.sex||null,age:s.age,description:$,photo_url:p,updated_at:new Date().toISOString()};if(j&&t){const{error:a}=await m.from("dogs").update(z).eq("id",t.id);if(a)throw a}else{const{error:a}=await m.from("dogs").insert({...z,is_adopted:!1});if(a)throw a}l()}catch(h){P(h?.message??r.admin.saveError)}finally{k(!1)}}}function W(i){const h=Array.from(i.target.files??[]);u(h)}return e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[D&&e.jsx("p",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-xl px-4 py-3",children:D}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:[r.admin.formName," *"]}),e.jsx("input",{type:"text",value:s.name,onChange:i=>c({...s,name:i.target.value}),required:!0,className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",placeholder:r.admin.formNamePlaceholder})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:r.admin.formPersonality}),e.jsx("input",{type:"text",value:s.personality,onChange:i=>c({...s,personality:i.target.value}),className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",placeholder:r.admin.formPersonalityPlaceholder})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:r.admin.formSize}),e.jsxs("select",{value:s.size,onChange:i=>c({...s,size:i.target.value}),className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",children:[e.jsx("option",{value:"small",children:r.sizes.small}),e.jsx("option",{value:"medium",children:r.sizes.medium}),e.jsx("option",{value:"large",children:r.sizes.large})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:r.admin.formSex}),e.jsxs("select",{value:s.sex,onChange:i=>c({...s,sex:i.target.value}),className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",children:[e.jsx("option",{value:"",children:r.admin.formSexUnknown}),e.jsx("option",{value:"female",children:r.sexes.female}),e.jsx("option",{value:"male",children:r.sexes.male})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:r.admin.formAge}),e.jsx("input",{type:"text",value:s.age,onChange:i=>c({...s,age:i.target.value}),className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",placeholder:r.admin.formAgePlaceholder})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:r.admin.formBreed}),e.jsx("input",{type:"text",value:s.breed,onChange:i=>c({...s,breed:i.target.value}),className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",placeholder:r.admin.formBreedPlaceholder})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:r.admin.formEntryDate}),e.jsx("input",{type:"text",value:s.entryDate,onChange:i=>c({...s,entryDate:i.target.value}),className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",placeholder:r.admin.formEntryDatePlaceholder})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:r.admin.formStory}),e.jsx("textarea",{value:s.story,onChange:i=>c({...s,story:i.target.value}),rows:4,className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400 resize-y",placeholder:r.admin.formStoryPlaceholder})]}),e.jsxs("fieldset",{children:[e.jsx("legend",{className:"text-sm font-semibold text-warm-700 mb-3",children:r.admin.formCompatibility}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[["socHumans",r.admin.formHumans],["socMales",r.admin.formMaleDogs],["socFemales",r.admin.formFemaleDogs],["socCats",r.admin.formCats]].map(([i,h])=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-warm-700 w-20",children:h}),e.jsxs("select",{value:s[i],onChange:p=>c({...s,[i]:p.target.value}),className:"flex-1 px-3 py-2 rounded-lg border border-warm-200 bg-warm-50 text-warm-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",children:[e.jsx("option",{value:"unknown",children:r.admin.formUnknown}),e.jsx("option",{value:"yes",children:r.admin.formSociable}),e.jsx("option",{value:"no",children:r.admin.formNotSociable})]})]},i))})]}),e.jsxs("fieldset",{children:[e.jsx("legend",{className:"text-sm font-semibold text-warm-700 mb-3",children:r.admin.formMedical}),e.jsx("div",{className:"flex flex-wrap gap-4",children:[["chipped",r.admin.formChipped],["vaccinated",r.admin.formVaccinated],["sterilized",r.admin.formSterilized]].map(([i,h])=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s[i],onChange:p=>c({...s,[i]:p.target.checked}),className:"w-4 h-4 rounded border-warm-300 text-primary-500 focus:ring-primary-400"}),e.jsx("span",{className:"text-sm text-warm-700",children:h})]},i))})]}),j&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-warm-700 mb-3",children:[r.admin.formCurrentPhotos,w.length>0&&e.jsxs("span",{className:"ml-2 text-warm-400 font-normal",children:["(",w.length," ",r.admin.formPhotosCount,")"]})]}),w.length===0?e.jsx("p",{className:"text-sm text-warm-400 italic",children:r.admin.formNoPhotos}):e.jsx("div",{className:"flex flex-wrap gap-3",children:w.map(i=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:i.url,alt:"",className:"w-20 h-20 object-cover rounded-xl border border-warm-200",loading:"lazy"}),e.jsx("button",{type:"button",onClick:()=>A(i.path),disabled:g===i.path,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50",title:r.admin.formDeletePhoto,children:g===i.path?"â€¦":"Ã—"})]},i.path))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:j?r.admin.formAddPhotos:r.admin.formPhotos}),e.jsxs("div",{className:"border-2 border-dashed border-warm-300 rounded-xl p-6 text-center cursor-pointer hover:border-primary-400 hover:bg-primary-50 transition-colors",onClick:()=>S.current?.click(),children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ“·"}),e.jsx("p",{className:"text-sm text-warm-600 font-medium",children:f.length>0?`${f.length} ${r.admin.formFilesSelected}`:r.admin.formPhotoClick}),e.jsx("p",{className:"text-xs text-warm-400 mt-1",children:r.admin.formPhotoFormats})]}),e.jsx("input",{ref:S,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:W}),f.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:f.map((i,h)=>e.jsxs("div",{className:"flex items-center gap-1.5 bg-primary-50 text-primary-700 text-xs font-medium px-3 py-1.5 rounded-lg border border-primary-200",children:[e.jsx("span",{children:"ðŸ–¼"}),e.jsx("span",{className:"truncate max-w-32",children:i.name})]},h))})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[e.jsxs("button",{type:"submit",disabled:v,className:"flex items-center gap-2 bg-primary-500 hover:bg-primary-600 disabled:opacity-60 text-white font-semibold px-6 py-3 rounded-xl transition-colors",children:[v?e.jsx(F,{}):null,v?r.admin.saving:j?r.admin.saveChanges:r.admin.addDog]}),e.jsx("button",{type:"button",onClick:o,disabled:v,className:"px-6 py-3 rounded-xl border border-warm-200 text-warm-700 font-semibold hover:bg-warm-100 transition-colors",children:r.admin.cancel})]})]})}function Q({dog:n,onConfirm:t,onCancel:l,deleting:o,t:r}){return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-warm-200 p-8 w-full max-w-md",children:[e.jsx("div",{className:"text-4xl mb-4 text-center",children:"âš ï¸"}),e.jsx("h3",{className:"text-xl font-bold text-warm-900 text-center mb-2",children:r.admin.deleteTitle}),e.jsxs("p",{className:"text-warm-600 text-sm text-center mb-2",children:[r.admin.deleteConfirm," ",e.jsx("strong",{className:"text-warm-900",children:n.name}),"?"]}),e.jsx("p",{className:"text-red-600 text-xs text-center bg-red-50 border border-red-200 rounded-xl px-4 py-3 mb-6",children:r.admin.deleteWarning}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:t,disabled:o,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 disabled:opacity-60 text-white font-semibold py-3 rounded-xl transition-colors",children:[o?e.jsx(F,{}):null,o?r.admin.deleting:r.admin.deleteYes]}),e.jsx("button",{onClick:l,disabled:o,className:"flex-1 py-3 rounded-xl border border-warm-200 text-warm-700 font-semibold hover:bg-warm-100 transition-colors",children:r.admin.cancel})]})]})})}function X({dogs:n,onRefresh:t,onAdd:l,onEdit:o,onLogout:r,t:s}){const[c,f]=x.useState(""),[u,w]=x.useState("all"),[N,g]=x.useState("all"),[d,v]=x.useState("all"),[k,D]=x.useState(null),[P,S]=x.useState(null),[j,C]=x.useState(!1),[A,_]=x.useState(!1),W={small:s.sizes.small,medium:s.sizes.medium,large:s.sizes.large},i={male:s.sexes.male,female:s.sexes.female},h=(u!=="all"?1:0)+(N!=="all"?1:0)+(d!=="all"?1:0),p=n.filter(a=>!(u!=="all"&&a.size!==u||N!=="all"&&a.sex!==N||d==="available"&&a.is_adopted||d==="adopted"&&!a.is_adopted||c&&!a.name.toLowerCase().includes(c.toLowerCase())));async function $(a){if(!(!m||k)){D(a.id);try{await m.from("dogs").update({is_adopted:!a.is_adopted,updated_at:new Date().toISOString()}).eq("id",a.id),t()}finally{D(null)}}}async function z(a){if(m){C(!0);try{const y=B(a.name),{data:b}=await m.storage.from("dog-photos").list(y);if(b&&b.length>0){const M=b.map(L=>`${y}/${L.name}`);await m.storage.from("dog-photos").remove(M)}await m.from("dogs").delete().eq("id",a.id),S(null),t()}finally{C(!1)}}}return e.jsxs(e.Fragment,{children:[P&&e.jsx(Q,{dog:P,onConfirm:()=>z(P),onCancel:()=>!j&&S(null),deleting:j,t:s}),e.jsxs("div",{className:"min-h-screen bg-warm-50",children:[e.jsx("header",{className:"bg-white border-b border-warm-200 sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ¾"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-warm-900 text-sm",children:"CAPA PVL"}),e.jsx("span",{className:"text-warm-400 text-xs ml-2",children:"Admin"})]})]}),e.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-sm text-warm-600 hover:text-warm-900 font-medium px-3 py-2 rounded-lg hover:bg-warm-100 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:[e.jsx("path",{fillRule:"evenodd",d:"M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z",clipRule:"evenodd"}),e.jsx("path",{fillRule:"evenodd",d:"M19 10a.75.75 0 00-.75-.75H8.704l1.048-1.04a.75.75 0 10-1.004-1.115l-2.5 2.25a.75.75 0 000 1.11l2.5 2.25a.75.75 0 101.004-1.115l-1.048-1.04h9.546A.75.75 0 0019 10z",clipRule:"evenodd"})]}),s.admin.logout]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-28 md:pb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-warm-900",children:s.admin.dogsTitle}),e.jsxs("p",{className:"text-warm-500 text-sm mt-0.5",children:[n.length," ",s.admin.total," Â· ",n.filter(a=>!a.is_adopted).length," ",s.admin.available," Â· ",n.filter(a=>a.is_adopted).length," ",s.admin.adopted]})]}),e.jsxs("button",{onClick:l,className:"hidden md:flex items-center gap-2 bg-primary-500 hover:bg-primary-600 text-white font-semibold px-5 py-2.5 rounded-xl transition-colors shadow-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:e.jsx("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})}),s.admin.addDog]})]}),e.jsxs("div",{className:"mb-6 space-y-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 text-warm-400 absolute left-3.5 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})}),e.jsx("input",{type:"search",value:c,onChange:a=>f(a.target.value),placeholder:s.admin.searchPlaceholder,className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-warm-200 bg-white text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400"})]}),e.jsxs("button",{onClick:()=>_(a=>!a),className:`sm:hidden flex items-center gap-2 px-4 py-2.5 rounded-xl border text-sm font-semibold transition-colors min-h-[44px] ${A||h>0?"border-primary-400 bg-primary-50 text-primary-700":"border-warm-200 bg-white text-warm-700 hover:bg-warm-50"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:e.jsx("path",{fillRule:"evenodd",d:"M2.628 1.601C5.028 1.206 7.49 1 10 1s4.973.206 7.372.601a.75.75 0 01.628.74v2.288a2.25 2.25 0 01-.659 1.59l-4.682 4.683a2.25 2.25 0 00-.659 1.59v3.037c0 .684-.31 1.33-.844 1.757l-1.937 1.55A.75.75 0 018 18.25v-5.757a2.25 2.25 0 00-.659-1.591L2.659 6.22A2.25 2.25 0 012 4.629V2.34a.75.75 0 01.628-.74z",clipRule:"evenodd"})}),s.admin.filters,h>0&&e.jsx("span",{className:"flex items-center justify-center w-5 h-5 bg-primary-500 text-white text-xs font-bold rounded-full",children:h})]})]}),e.jsxs("div",{className:`${A?"flex":"hidden"} sm:flex flex-col sm:flex-row gap-3`,children:[e.jsxs("select",{value:u,onChange:a=>w(a.target.value),className:"px-4 py-2.5 rounded-xl border border-warm-200 bg-white text-warm-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400 min-h-[44px]",children:[e.jsx("option",{value:"all",children:s.admin.allSizes}),e.jsx("option",{value:"small",children:s.sizes.small}),e.jsx("option",{value:"medium",children:s.sizes.medium}),e.jsx("option",{value:"large",children:s.sizes.large})]}),e.jsxs("select",{value:N,onChange:a=>g(a.target.value),className:"px-4 py-2.5 rounded-xl border border-warm-200 bg-white text-warm-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400 min-h-[44px]",children:[e.jsx("option",{value:"all",children:s.admin.allSexes}),e.jsxs("option",{value:"male",children:["â™‚ ",s.sexes.male]}),e.jsxs("option",{value:"female",children:["â™€ ",s.sexes.female]})]}),e.jsxs("select",{value:d,onChange:a=>v(a.target.value),className:"px-4 py-2.5 rounded-xl border border-warm-200 bg-white text-warm-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400 min-h-[44px]",children:[e.jsx("option",{value:"all",children:s.admin.allStatuses}),e.jsx("option",{value:"available",children:s.admin.statusAvailable}),e.jsx("option",{value:"adopted",children:s.admin.statusAdopted})]}),h>0&&e.jsx("button",{onClick:()=>{w("all"),g("all"),v("all")},className:"text-sm text-warm-500 hover:text-warm-700 font-medium px-3 py-2.5 rounded-xl hover:bg-warm-100 transition-colors whitespace-nowrap min-h-[44px]",children:s.admin.clearFilters})]})]}),e.jsx("div",{className:"md:hidden",children:p.length===0?e.jsxs("div",{className:"py-20 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ¾"}),e.jsx("p",{className:"text-warm-500 font-medium",children:s.admin.noDogs})]}):e.jsx("div",{className:"space-y-3",children:p.map(a=>e.jsxs("div",{className:`bg-white rounded-2xl border border-warm-200 shadow-sm overflow-hidden transition-opacity ${a.is_adopted?"opacity-60":""}`,children:[e.jsxs("div",{className:"flex items-start gap-4 p-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-warm-100 flex-shrink-0",children:a.photo_url?e.jsx("img",{src:a.photo_url,alt:a.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-warm-300 text-2xl",children:"ðŸ¶"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsx("h3",{className:"font-bold text-warm-900 text-base leading-tight truncate",children:a.name})}),e.jsx("p",{className:"text-warm-500 text-xs mt-1 leading-snug",children:[W[a.size]??a.size,a.sex?i[a.sex]:null,a.age||null].filter(Boolean).join(" Â· ")}),e.jsxs("button",{onClick:()=>$(a),disabled:k===a.id,className:`mt-2 inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold transition-colors min-h-[32px] ${a.is_adopted?"bg-nature-100 text-nature-700 hover:bg-nature-200":"bg-primary-100 text-primary-700 hover:bg-primary-200"}`,title:a.is_adopted?s.admin.markAvailable:s.admin.markAdopted,children:[k===a.id?e.jsx(F,{size:"sm"}):e.jsx("span",{children:a.is_adopted?"âœ“":"â—‹"}),a.is_adopted?s.admin.statusAdopted:s.admin.statusAvailable]})]})]}),e.jsxs("div",{className:"flex border-t border-warm-100",children:[e.jsxs("button",{onClick:()=>o(a),className:"flex-1 flex items-center justify-center gap-2 py-3 text-sm font-semibold text-warm-600 hover:text-primary-600 hover:bg-primary-50 transition-colors min-h-[44px]",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:[e.jsx("path",{d:"M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"}),e.jsx("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"})]}),s.admin.edit]}),e.jsx("div",{className:"w-px bg-warm-100"}),e.jsxs("button",{onClick:()=>S(a),className:"flex-1 flex items-center justify-center gap-2 py-3 text-sm font-semibold text-warm-600 hover:text-red-600 hover:bg-red-50 transition-colors min-h-[44px]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:e.jsx("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z",clipRule:"evenodd"})}),s.admin.delete]})]})]},a.id))})}),e.jsx("div",{className:"hidden md:block bg-white rounded-2xl border border-warm-200 shadow-sm overflow-hidden",children:p.length===0?e.jsxs("div",{className:"py-20 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ¾"}),e.jsx("p",{className:"text-warm-500 font-medium",children:s.admin.noDogs})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-warm-100 bg-warm-50",children:[e.jsx("th",{className:"text-left text-xs font-semibold text-warm-500 uppercase tracking-wide px-5 py-3 w-14",children:s.admin.photo}),e.jsx("th",{className:"text-left text-xs font-semibold text-warm-500 uppercase tracking-wide px-5 py-3",children:s.admin.name}),e.jsx("th",{className:"text-left text-xs font-semibold text-warm-500 uppercase tracking-wide px-4 py-3 hidden sm:table-cell",children:s.admin.size}),e.jsx("th",{className:"text-left text-xs font-semibold text-warm-500 uppercase tracking-wide px-4 py-3 hidden md:table-cell",children:s.admin.sex}),e.jsx("th",{className:"text-left text-xs font-semibold text-warm-500 uppercase tracking-wide px-4 py-3 hidden lg:table-cell",children:s.admin.age}),e.jsx("th",{className:"text-left text-xs font-semibold text-warm-500 uppercase tracking-wide px-4 py-3",children:s.admin.status}),e.jsx("th",{className:"text-right text-xs font-semibold text-warm-500 uppercase tracking-wide px-5 py-3",children:s.admin.actions})]})}),e.jsx("tbody",{className:"divide-y divide-warm-100",children:p.map(a=>e.jsxs("tr",{className:`hover:bg-warm-50 transition-colors ${a.is_adopted?"opacity-50":""}`,children:[e.jsx("td",{className:"px-5 py-3",children:e.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden bg-warm-100 flex-shrink-0",children:a.photo_url?e.jsx("img",{src:a.photo_url,alt:a.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-warm-300 text-lg",children:"ðŸ¶"})})}),e.jsx("td",{className:"px-5 py-3",children:e.jsx("span",{className:"font-semibold text-warm-900",children:a.name})}),e.jsx("td",{className:"px-4 py-3 hidden sm:table-cell",children:e.jsx("span",{className:"text-warm-600",children:W[a.size]??a.size})}),e.jsx("td",{className:"px-4 py-3 hidden md:table-cell",children:e.jsx("span",{className:"text-warm-600",children:a.sex?i[a.sex]:"â€”"})}),e.jsx("td",{className:"px-4 py-3 hidden lg:table-cell",children:e.jsx("span",{className:"text-warm-600",children:a.age||"â€”"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("button",{onClick:()=>$(a),disabled:k===a.id,className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold transition-colors ${a.is_adopted?"bg-nature-100 text-nature-700 hover:bg-nature-200":"bg-primary-100 text-primary-700 hover:bg-primary-200"}`,title:a.is_adopted?s.admin.markAvailable:s.admin.markAdopted,children:[k===a.id?e.jsx(F,{size:"sm"}):e.jsx("span",{children:a.is_adopted?"âœ“":"â—‹"}),a.is_adopted?s.admin.statusAdopted:s.admin.statusAvailable]})}),e.jsx("td",{className:"px-5 py-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>o(a),className:"p-2 text-warm-500 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:s.admin.edit,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:[e.jsx("path",{d:"M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"}),e.jsx("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"})]})}),e.jsx("button",{onClick:()=>S(a),className:"p-2 text-warm-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:s.admin.delete,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:e.jsx("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z",clipRule:"evenodd"})})})]})})]},a.id))})]})})}),e.jsxs("p",{className:"text-xs text-warm-400 text-center mt-6",children:[p.length," ",s.admin.of," ",n.length," ",s.admin.dogUnit," ",s.admin.listed]})]}),e.jsx("button",{onClick:l,className:"md:hidden fixed bottom-6 right-6 z-50 flex items-center justify-center w-14 h-14 bg-primary-500 hover:bg-primary-600 active:bg-primary-700 text-white rounded-full shadow-lg transition-colors","aria-label":s.admin.addDog,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-6 h-6",children:e.jsx("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})})})]})]})}function se({locale:n="pt"}){const t=I(n),[l,o]=x.useState(!1),[r,s]=x.useState(!1),[c,f]=x.useState("dashboard"),[u,w]=x.useState(null),[N,g]=x.useState([]),[d,v]=x.useState(!1);x.useEffect(()=>{if(!m){o(!0);return}m.auth.getUser().then(({data:A})=>{s(!!A.user),o(!0)});const{data:{subscription:C}}=m.auth.onAuthStateChange((A,_)=>{s(!!_?.user)});return()=>C.unsubscribe()},[]),x.useEffect(()=>{r&&k()},[r]);async function k(){if(m){v(!0);try{const{data:C}=await m.from("dogs").select("*").order("created_at",{ascending:!1});g(C??[])}finally{v(!1)}}}async function D(){m&&(await m.auth.signOut(),s(!1),f("dashboard"))}function P(C){w(C),f("edit")}function S(){f("dashboard"),w(null),k()}function j(){f("dashboard"),w(null)}if(!l)return e.jsx("div",{className:"min-h-screen bg-warm-50 flex items-center justify-center",children:e.jsx(F,{size:"lg"})});if(!r)return e.jsx(K,{onLogin:()=>s(!0),t});if(c==="add")return e.jsxs("div",{className:"min-h-screen bg-warm-50",children:[e.jsx("header",{className:"bg-white border-b border-warm-200 sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center gap-3",children:[e.jsx("button",{onClick:j,className:"p-2 text-warm-500 hover:text-warm-900 hover:bg-warm-100 rounded-lg transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-warm-900 text-sm",children:t.admin.addDogTitle}),e.jsx("p",{className:"text-warm-400 text-xs",children:t.admin.addDogSub})]})]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"bg-white rounded-2xl border border-warm-200 shadow-sm p-6 sm:p-8",children:e.jsx(G,{initial:H,onSave:S,onCancel:j,t})})})]});if(c==="edit"&&u){const C={...H,name:u.name,size:u.size,sex:u.sex??"",age:u.age??"",description:u.description??""},A=u.description?J(u.description,C,t):C;return e.jsxs("div",{className:"min-h-screen bg-warm-50",children:[e.jsx("header",{className:"bg-white border-b border-warm-200 sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center gap-3",children:[e.jsx("button",{onClick:j,className:"p-2 text-warm-500 hover:text-warm-900 hover:bg-warm-100 rounded-lg transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-warm-900 text-sm",children:u.name}),e.jsx("p",{className:"text-warm-400 text-xs",children:t.admin.editDogSub})]})]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"bg-white rounded-2xl border border-warm-200 shadow-sm p-6 sm:p-8",children:e.jsx(G,{initial:A,existingDog:u,onSave:S,onCancel:j,t})})})]})}return d?e.jsxs("div",{className:"min-h-screen bg-warm-50 flex items-center justify-center gap-3 text-warm-500",children:[e.jsx(F,{size:"lg"}),e.jsx("span",{className:"font-medium",children:t.admin.loading})]}):e.jsx(X,{dogs:N,onRefresh:k,onAdd:()=>f("add"),onEdit:P,onLogout:D,t})}export{se as default};
