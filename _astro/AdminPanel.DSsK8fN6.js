import{s as c,j as e}from"./supabase.BjDmEivz.js";import{r as d}from"./index.DiEladB3.js";function R(a){return a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-")}function U(a){return a===0?1:a+2}function O(a){return`photo-${String(a).padStart(2,"0")}.jpg`}const B={small:"Pequeno",medium:"MÃ©dio",large:"Grande"},T={male:"Macho",female:"FÃªmea"},V={name:"",size:"medium",sex:"",age:"",description:"",personality:"",story:"",breed:"",entryDate:"",socHumans:"unknown",socMales:"unknown",socFemales:"unknown",socCats:"unknown",chipped:!1,vaccinated:!1,sterilized:!1},Y={male:"Masculino",female:"Feminino"},J={small:"Pequeno",medium:"MÃ©dio",large:"Grande"};function X(a){const r=[],l=Y[a.sex];l&&r.push(`Sexo: ${l}`),a.age&&r.push(`Idade: ${a.age}`),a.entryDate&&r.push(`Data de entrada: ${a.entryDate}`),a.breed&&r.push(`RaÃ§a: ${a.breed}`),r.push(`Porte: ${J[a.size]??a.size}`),a.personality&&r.push(`Personalidade: ${a.personality}`),a.socHumans==="yes"?r.push("SociÃ¡vel com humanos"):a.socHumans==="no"?r.push("NÃ£o sociÃ¡vel com humanos"):r.push("NÃ£o sabemos se Ã© sociÃ¡vel com humanos"),a.socMales==="yes"?r.push("SociÃ¡vel com machos"):a.socMales==="no"?r.push("NÃ£o sociÃ¡vel com machos"):r.push("NÃ£o sabemos se Ã© sociÃ¡vel com machos"),a.socFemales==="yes"?r.push("SociÃ¡vel com fÃªmeas"):a.socFemales==="no"?r.push("NÃ£o sociÃ¡vel com fÃªmeas"):r.push("NÃ£o sabemos se Ã© sociÃ¡vel com fÃªmeas"),a.socCats==="yes"?r.push("SociÃ¡vel com gatos"):a.socCats==="no"?r.push("NÃ£o sociÃ¡vel com gatos"):r.push("NÃ£o sabemos se Ã© sociÃ¡vel com gatos");const x=[];return a.chipped&&x.push("Chipado"),a.vaccinated&&x.push("Vacinado"),a.sterilized&&x.push("Esterilizado"),x.length>0&&r.push(x.join(", ")),a.story&&r.push(`HistÃ³ria: ${a.story}`),r.join(`
`)}function Z(a,r){const l={...r},x=a.split(`
`).filter(Boolean),o=[];for(const m of x){const i=m.match(/^([^:]+):\s*(.+)$/);if(i){const n=i[1].trim().toLowerCase(),h=i[2].trim();n==="personalidade"?l.personality=h:n==="histÃ³ria"?l.story=h:n==="raÃ§a"?l.breed=h:n==="data de entrada"&&(l.entryDate=h)}else{const n=m.trim();n==="SociÃ¡vel com humanos"?l.socHumans="yes":n==="NÃ£o sociÃ¡vel com humanos"?l.socHumans="no":n==="NÃ£o sabemos se Ã© sociÃ¡vel com humanos"?l.socHumans="unknown":n==="SociÃ¡vel com machos"?l.socMales="yes":n==="NÃ£o sociÃ¡vel com machos"?l.socMales="no":n==="NÃ£o sabemos se Ã© sociÃ¡vel com machos"?l.socMales="unknown":n==="SociÃ¡vel com fÃªmeas"?l.socFemales="yes":n==="NÃ£o sociÃ¡vel com fÃªmeas"?l.socFemales="no":n==="NÃ£o sabemos se Ã© sociÃ¡vel com fÃªmeas"?l.socFemales="unknown":n==="SociÃ¡vel com gatos"?l.socCats="yes":n==="NÃ£o sociÃ¡vel com gatos"?l.socCats="no":n==="NÃ£o sabemos se Ã© sociÃ¡vel com gatos"?l.socCats="unknown":n.match(/^(Chipado|Vacinado|Esterilizado)/)?(n.includes("Chipado")&&(l.chipped=!0),n.includes("Vacinado")&&(l.vaccinated=!0),n.includes("Esterilizado")&&(l.sterilized=!0)):o.push(n)}}return o.length>0&&!l.story&&(l.story=o.join(" ")),l}function F({size:a="sm"}){const r=a==="lg"?"h-8 w-8":"h-4 w-4";return e.jsxs("svg",{className:`${r} animate-spin text-current`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]})}function K({onLogin:a}){const[r,l]=d.useState(""),[x,o]=d.useState(""),[m,i]=d.useState(""),[n,h]=d.useState(!1);async function S(g){if(g.preventDefault(),!!c){i(""),h(!0);try{const{error:j}=await c.auth.signInWithPassword({email:r,password:x});j?i("Email ou palavra-passe incorretos."):a()}catch{i("Erro ao entrar. Tente novamente.")}finally{h(!1)}}}return e.jsx("div",{className:"min-h-screen bg-warm-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-100 rounded-2xl mb-4",children:e.jsx("span",{className:"text-3xl",children:"ðŸ¾"})}),e.jsx("h1",{className:"text-2xl font-bold text-warm-900",children:"CAPA PVL"}),e.jsx("p",{className:"text-warm-500 text-sm mt-1",children:"Ãrea de AdministraÃ§Ã£o"})]}),e.jsxs("form",{onSubmit:S,className:"bg-white rounded-2xl shadow-sm border border-warm-200 p-8 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-warm-700 mb-1.5",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:r,onChange:g=>l(g.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400 transition-colors",placeholder:"admin@capapvl.pt"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-warm-700 mb-1.5",children:"Palavra-passe"}),e.jsx("input",{id:"password",type:"password",value:x,onChange:g=>o(g.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400 transition-colors",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),m&&e.jsx("p",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-xl px-4 py-3",children:m}),e.jsxs("button",{type:"submit",disabled:n,className:"w-full flex items-center justify-center gap-2 bg-primary-500 hover:bg-primary-600 disabled:opacity-60 text-white font-semibold py-3 rounded-xl transition-colors",children:[n?e.jsx(F,{}):null,n?"A entrarâ€¦":"Entrar"]})]})]})})}function q({initial:a,existingDog:r,onSave:l,onCancel:x}){const[o,m]=d.useState(a),[i,n]=d.useState([]),[h,S]=d.useState([]),[g,j]=d.useState(null),[k,z]=d.useState(!1),[M,A]=d.useState(""),y=d.useRef(null),p=!!r;d.useEffect(()=>{!p||!c||!r||E(R(r.name))},[p,r]);async function E(t){if(!c)return;const{data:u,error:f}=await c.storage.from("dog-photos").list(t,{sortBy:{column:"name",order:"asc"}});if(f||!u)return;const s=u.filter(N=>N.name.endsWith(".jpg")||N.name.endsWith(".jpeg")||N.name.endsWith(".png")||N.name.endsWith(".webp")).map(N=>{const b=`${t}/${N.name}`,{data:v}=c.storage.from("dog-photos").getPublicUrl(b);return{path:b,url:v.publicUrl}});S(s)}async function P(t){if(c){j(t);try{await c.storage.from("dog-photos").remove([t]),S(u=>u.filter(f=>f.path!==t))}finally{j(null)}}}async function L(t){if(t.preventDefault(),!!c){A(""),z(!0);try{const u=R(o.name||(r?.name??""));let f=r?.photo_url??"";if(i.length>0){let b=0;if(p){const w=h.map($=>{const D=$.path.match(/photo-(\d+)\./);return D?parseInt(D[1],10):0}),C=w.length>0?Math.max(...w):0;C===0?b=0:C===1?b=1:b=C-1}const v=[];for(let w=0;w<i.length;w++){const C=b+w,$=U(C),D=O($),H=`${u}/${D}`,I=i[w],{error:W}=await c.storage.from("dog-photos").upload(H,I,{upsert:!0,contentType:I.type||"image/jpeg"});if(!W){const{data:G}=c.storage.from("dog-photos").getPublicUrl(H);v.push(G.publicUrl)}}(v.length>0&&!f||v.length>0&&!p)&&(f=v[0])}if(p){const b=h.filter(w=>w.url!==r?.photo_url);!h.find(w=>w.url===f)&&!f.includes(u)&&(f=h.length>0?h[0].url:"");const{data:v}=await c.storage.from("dog-photos").list(u,{sortBy:{column:"name",order:"asc"}});if(v&&v.length>0){const w=v.find(C=>C.name.endsWith(".jpg")||C.name.endsWith(".jpeg")||C.name.endsWith(".png")||C.name.endsWith(".webp"));if(w&&!f){const{data:C}=c.storage.from("dog-photos").getPublicUrl(`${u}/${w.name}`);f=C.publicUrl}}}const s=X(o),N={name:o.name,size:o.size,sex:o.sex||null,age:o.age,description:s,photo_url:f,updated_at:new Date().toISOString()};if(p&&r){const{error:b}=await c.from("dogs").update(N).eq("id",r.id);if(b)throw b}else{const{error:b}=await c.from("dogs").insert({...N,is_adopted:!1});if(b)throw b}l()}catch(u){A(u?.message??"Erro ao guardar. Tente novamente.")}finally{z(!1)}}}function _(t){const u=Array.from(t.target.files??[]);n(u)}return e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[M&&e.jsx("p",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-xl px-4 py-3",children:M}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:"Nome *"}),e.jsx("input",{type:"text",value:o.name,onChange:t=>m({...o,name:t.target.value}),required:!0,className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",placeholder:"Ex: Bolinha"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:"SubtÃ­tulo (personalidade)"}),e.jsx("input",{type:"text",value:o.personality,onChange:t=>m({...o,personality:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",placeholder:"Ex: Companheiro, muito meigo e ativo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:"Tamanho"}),e.jsxs("select",{value:o.size,onChange:t=>m({...o,size:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",children:[e.jsx("option",{value:"small",children:"Pequeno"}),e.jsx("option",{value:"medium",children:"MÃ©dio"}),e.jsx("option",{value:"large",children:"Grande"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:"Sexo"}),e.jsxs("select",{value:o.sex,onChange:t=>m({...o,sex:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",children:[e.jsx("option",{value:"",children:"Desconhecido"}),e.jsx("option",{value:"female",children:"FÃªmea"}),e.jsx("option",{value:"male",children:"Macho"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:"Idade"}),e.jsx("input",{type:"text",value:o.age,onChange:t=>m({...o,age:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",placeholder:"Ex: 3 anos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:"RaÃ§a"}),e.jsx("input",{type:"text",value:o.breed,onChange:t=>m({...o,breed:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",placeholder:"Ex: Indefinida, Labrador, Cruzado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:"Data de entrada"}),e.jsx("input",{type:"text",value:o.entryDate,onChange:t=>m({...o,entryDate:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",placeholder:"Ex: 2023, Janeiro 2024"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:"HistÃ³ria"}),e.jsx("textarea",{value:o.story,onChange:t=>m({...o,story:t.target.value}),rows:4,className:"w-full px-4 py-3 rounded-xl border border-warm-200 bg-warm-50 text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400 resize-y",placeholder:"Conta a histÃ³ria do cÃ£oâ€¦"})]}),e.jsxs("fieldset",{children:[e.jsx("legend",{className:"text-sm font-semibold text-warm-700 mb-3",children:"Compatibilidade"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[["socHumans","Humanos"],["socMales","Machos"],["socFemales","FÃªmeas"],["socCats","Gatos"]].map(([t,u])=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-warm-700 w-20",children:u}),e.jsxs("select",{value:o[t],onChange:f=>m({...o,[t]:f.target.value}),className:"flex-1 px-3 py-2 rounded-lg border border-warm-200 bg-warm-50 text-warm-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400",children:[e.jsx("option",{value:"unknown",children:"NÃ£o sabemos"}),e.jsx("option",{value:"yes",children:"SociÃ¡vel"}),e.jsx("option",{value:"no",children:"NÃ£o sociÃ¡vel"})]})]},t))})]}),e.jsxs("fieldset",{children:[e.jsx("legend",{className:"text-sm font-semibold text-warm-700 mb-3",children:"Estado mÃ©dico"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:[["chipped","Chipado"],["vaccinated","Vacinado"],["sterilized","Esterilizado"]].map(([t,u])=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o[t],onChange:f=>m({...o,[t]:f.target.checked}),className:"w-4 h-4 rounded border-warm-300 text-primary-500 focus:ring-primary-400"}),e.jsx("span",{className:"text-sm text-warm-700",children:u})]},t))})]}),p&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-warm-700 mb-3",children:["Fotos atuais",h.length>0&&e.jsxs("span",{className:"ml-2 text-warm-400 font-normal",children:["(",h.length," fotos)"]})]}),h.length===0?e.jsx("p",{className:"text-sm text-warm-400 italic",children:"Nenhuma foto carregada."}):e.jsx("div",{className:"flex flex-wrap gap-3",children:h.map(t=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:t.url,alt:"",className:"w-20 h-20 object-cover rounded-xl border border-warm-200",loading:"lazy"}),e.jsx("button",{type:"button",onClick:()=>P(t.path),disabled:g===t.path,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50",title:"Eliminar foto",children:g===t.path?"â€¦":"Ã—"})]},t.path))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-warm-700 mb-1.5",children:p?"Adicionar novas fotos":"Fotos"}),e.jsxs("div",{className:"border-2 border-dashed border-warm-300 rounded-xl p-6 text-center cursor-pointer hover:border-primary-400 hover:bg-primary-50 transition-colors",onClick:()=>y.current?.click(),children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ“·"}),e.jsx("p",{className:"text-sm text-warm-600 font-medium",children:i.length>0?`${i.length} ficheiro(s) selecionado(s)`:"Clica para selecionar fotos"}),e.jsx("p",{className:"text-xs text-warm-400 mt-1",children:"JPG, PNG, WebP â€” mÃºltiplos ficheiros permitidos"})]}),e.jsx("input",{ref:y,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:_}),i.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:i.map((t,u)=>e.jsxs("div",{className:"flex items-center gap-1.5 bg-primary-50 text-primary-700 text-xs font-medium px-3 py-1.5 rounded-lg border border-primary-200",children:[e.jsx("span",{children:"ðŸ–¼"}),e.jsx("span",{className:"truncate max-w-32",children:t.name})]},u))})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[e.jsxs("button",{type:"submit",disabled:k,className:"flex items-center gap-2 bg-primary-500 hover:bg-primary-600 disabled:opacity-60 text-white font-semibold px-6 py-3 rounded-xl transition-colors",children:[k?e.jsx(F,{}):null,k?"A guardarâ€¦":p?"Guardar AlteraÃ§Ãµes":"Adicionar CÃ£o"]}),e.jsx("button",{type:"button",onClick:x,disabled:k,className:"px-6 py-3 rounded-xl border border-warm-200 text-warm-700 font-semibold hover:bg-warm-100 transition-colors",children:"Cancelar"})]})]})}function Q({dog:a,onConfirm:r,onCancel:l,deleting:x}){return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-warm-200 p-8 w-full max-w-md",children:[e.jsx("div",{className:"text-4xl mb-4 text-center",children:"âš ï¸"}),e.jsx("h3",{className:"text-xl font-bold text-warm-900 text-center mb-2",children:"Eliminar CÃ£o"}),e.jsxs("p",{className:"text-warm-600 text-sm text-center mb-2",children:["Tens a certeza que queres eliminar ",e.jsx("strong",{className:"text-warm-900",children:a.name}),"?"]}),e.jsx("p",{className:"text-red-600 text-xs text-center bg-red-50 border border-red-200 rounded-xl px-4 py-3 mb-6",children:"Esta aÃ§Ã£o Ã© permanente. Todos os dados e fotos serÃ£o eliminados e nÃ£o podem ser recuperados."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:r,disabled:x,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 disabled:opacity-60 text-white font-semibold py-3 rounded-xl transition-colors",children:[x?e.jsx(F,{}):null,x?"A eliminarâ€¦":"Sim, eliminar"]}),e.jsx("button",{onClick:l,disabled:x,className:"flex-1 py-3 rounded-xl border border-warm-200 text-warm-700 font-semibold hover:bg-warm-100 transition-colors",children:"Cancelar"})]})]})})}function ee({dogs:a,onRefresh:r,onAdd:l,onEdit:x,onLogout:o}){const[m,i]=d.useState(""),[n,h]=d.useState("all"),[S,g]=d.useState("all"),[j,k]=d.useState("all"),[z,M]=d.useState(null),[A,y]=d.useState(null),[p,E]=d.useState(!1),[P,L]=d.useState(!1),_=(n!=="all"?1:0)+(S!=="all"?1:0)+(j!=="all"?1:0),t=a.filter(s=>!(n!=="all"&&s.size!==n||S!=="all"&&s.sex!==S||j==="available"&&s.is_adopted||j==="adopted"&&!s.is_adopted||m&&!s.name.toLowerCase().includes(m.toLowerCase())));async function u(s){if(!(!c||z)){M(s.id);try{await c.from("dogs").update({is_adopted:!s.is_adopted,updated_at:new Date().toISOString()}).eq("id",s.id),r()}finally{M(null)}}}async function f(s){if(c){E(!0);try{const N=R(s.name),{data:b}=await c.storage.from("dog-photos").list(N);if(b&&b.length>0){const v=b.map(w=>`${N}/${w.name}`);await c.storage.from("dog-photos").remove(v)}await c.from("dogs").delete().eq("id",s.id),y(null),r()}finally{E(!1)}}}return e.jsxs(e.Fragment,{children:[A&&e.jsx(Q,{dog:A,onConfirm:()=>f(A),onCancel:()=>!p&&y(null),deleting:p}),e.jsxs("div",{className:"min-h-screen bg-warm-50",children:[e.jsx("header",{className:"bg-white border-b border-warm-200 sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ¾"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-warm-900 text-sm",children:"CAPA PVL"}),e.jsx("span",{className:"text-warm-400 text-xs ml-2",children:"Admin"})]})]}),e.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-sm text-warm-600 hover:text-warm-900 font-medium px-3 py-2 rounded-lg hover:bg-warm-100 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:[e.jsx("path",{fillRule:"evenodd",d:"M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z",clipRule:"evenodd"}),e.jsx("path",{fillRule:"evenodd",d:"M19 10a.75.75 0 00-.75-.75H8.704l1.048-1.04a.75.75 0 10-1.004-1.115l-2.5 2.25a.75.75 0 000 1.11l2.5 2.25a.75.75 0 101.004-1.115l-1.048-1.04h9.546A.75.75 0 0019 10z",clipRule:"evenodd"})]}),"Sair"]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-28 md:pb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-warm-900",children:"CÃ£es"}),e.jsxs("p",{className:"text-warm-500 text-sm mt-0.5",children:[a.length," total Â· ",a.filter(s=>!s.is_adopted).length," disponÃ­veis Â· ",a.filter(s=>s.is_adopted).length," adotados"]})]}),e.jsxs("button",{onClick:l,className:"hidden md:flex items-center gap-2 bg-primary-500 hover:bg-primary-600 text-white font-semibold px-5 py-2.5 rounded-xl transition-colors shadow-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:e.jsx("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})}),"Adicionar CÃ£o"]})]}),e.jsxs("div",{className:"mb-6 space-y-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 text-warm-400 absolute left-3.5 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})}),e.jsx("input",{type:"search",value:m,onChange:s=>i(s.target.value),placeholder:"Pesquisar por nomeâ€¦",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-warm-200 bg-white text-warm-900 placeholder-warm-400 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400"})]}),e.jsxs("button",{onClick:()=>L(s=>!s),className:`sm:hidden flex items-center gap-2 px-4 py-2.5 rounded-xl border text-sm font-semibold transition-colors min-h-[44px] ${P||_>0?"border-primary-400 bg-primary-50 text-primary-700":"border-warm-200 bg-white text-warm-700 hover:bg-warm-50"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:e.jsx("path",{fillRule:"evenodd",d:"M2.628 1.601C5.028 1.206 7.49 1 10 1s4.973.206 7.372.601a.75.75 0 01.628.74v2.288a2.25 2.25 0 01-.659 1.59l-4.682 4.683a2.25 2.25 0 00-.659 1.59v3.037c0 .684-.31 1.33-.844 1.757l-1.937 1.55A.75.75 0 018 18.25v-5.757a2.25 2.25 0 00-.659-1.591L2.659 6.22A2.25 2.25 0 012 4.629V2.34a.75.75 0 01.628-.74z",clipRule:"evenodd"})}),"Filtros",_>0&&e.jsx("span",{className:"flex items-center justify-center w-5 h-5 bg-primary-500 text-white text-xs font-bold rounded-full",children:_})]})]}),e.jsxs("div",{className:`${P?"flex":"hidden"} sm:flex flex-col sm:flex-row gap-3`,children:[e.jsxs("select",{value:n,onChange:s=>h(s.target.value),className:"px-4 py-2.5 rounded-xl border border-warm-200 bg-white text-warm-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400 min-h-[44px]",children:[e.jsx("option",{value:"all",children:"Todos os tamanhos"}),e.jsx("option",{value:"small",children:"Pequeno"}),e.jsx("option",{value:"medium",children:"MÃ©dio"}),e.jsx("option",{value:"large",children:"Grande"})]}),e.jsxs("select",{value:S,onChange:s=>g(s.target.value),className:"px-4 py-2.5 rounded-xl border border-warm-200 bg-white text-warm-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400 min-h-[44px]",children:[e.jsx("option",{value:"all",children:"Todos os sexos"}),e.jsx("option",{value:"male",children:"â™‚ Macho"}),e.jsx("option",{value:"female",children:"â™€ FÃªmea"})]}),e.jsxs("select",{value:j,onChange:s=>k(s.target.value),className:"px-4 py-2.5 rounded-xl border border-warm-200 bg-white text-warm-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-primary-400 min-h-[44px]",children:[e.jsx("option",{value:"all",children:"Todos os estados"}),e.jsx("option",{value:"available",children:"DisponÃ­vel"}),e.jsx("option",{value:"adopted",children:"Adotado"})]}),_>0&&e.jsx("button",{onClick:()=>{h("all"),g("all"),k("all")},className:"text-sm text-warm-500 hover:text-warm-700 font-medium px-3 py-2.5 rounded-xl hover:bg-warm-100 transition-colors whitespace-nowrap min-h-[44px]",children:"Limpar filtros"})]})]}),e.jsx("div",{className:"md:hidden",children:t.length===0?e.jsxs("div",{className:"py-20 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ¾"}),e.jsx("p",{className:"text-warm-500 font-medium",children:"Nenhum cÃ£o encontrado"})]}):e.jsx("div",{className:"space-y-3",children:t.map(s=>e.jsxs("div",{className:`bg-white rounded-2xl border border-warm-200 shadow-sm overflow-hidden transition-opacity ${s.is_adopted?"opacity-60":""}`,children:[e.jsxs("div",{className:"flex items-start gap-4 p-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-warm-100 flex-shrink-0",children:s.photo_url?e.jsx("img",{src:s.photo_url,alt:s.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-warm-300 text-2xl",children:"ðŸ¶"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsx("h3",{className:"font-bold text-warm-900 text-base leading-tight truncate",children:s.name})}),e.jsx("p",{className:"text-warm-500 text-xs mt-1 leading-snug",children:[B[s.size]??s.size,s.sex?T[s.sex]:null,s.age||null].filter(Boolean).join(" Â· ")}),e.jsxs("button",{onClick:()=>u(s),disabled:z===s.id,className:`mt-2 inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold transition-colors min-h-[32px] ${s.is_adopted?"bg-nature-100 text-nature-700 hover:bg-nature-200":"bg-primary-100 text-primary-700 hover:bg-primary-200"}`,title:s.is_adopted?"Marcar como disponÃ­vel":"Marcar como adotado",children:[z===s.id?e.jsx(F,{size:"sm"}):e.jsx("span",{children:s.is_adopted?"âœ“":"â—‹"}),s.is_adopted?"Adotado":"DisponÃ­vel"]})]})]}),e.jsxs("div",{className:"flex border-t border-warm-100",children:[e.jsxs("button",{onClick:()=>x(s),className:"flex-1 flex items-center justify-center gap-2 py-3 text-sm font-semibold text-warm-600 hover:text-primary-600 hover:bg-primary-50 transition-colors min-h-[44px]",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:[e.jsx("path",{d:"M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"}),e.jsx("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"})]}),"Editar"]}),e.jsx("div",{className:"w-px bg-warm-100"}),e.jsxs("button",{onClick:()=>y(s),className:"flex-1 flex items-center justify-center gap-2 py-3 text-sm font-semibold text-warm-600 hover:text-red-600 hover:bg-red-50 transition-colors min-h-[44px]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:e.jsx("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z",clipRule:"evenodd"})}),"Eliminar"]})]})]},s.id))})}),e.jsx("div",{className:"hidden md:block bg-white rounded-2xl border border-warm-200 shadow-sm overflow-hidden",children:t.length===0?e.jsxs("div",{className:"py-20 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ¾"}),e.jsx("p",{className:"text-warm-500 font-medium",children:"Nenhum cÃ£o encontrado"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-warm-100 bg-warm-50",children:[e.jsx("th",{className:"text-left text-xs font-semibold text-warm-500 uppercase tracking-wide px-5 py-3 w-14",children:"Foto"}),e.jsx("th",{className:"text-left text-xs font-semibold text-warm-500 uppercase tracking-wide px-5 py-3",children:"Nome"}),e.jsx("th",{className:"text-left text-xs font-semibold text-warm-500 uppercase tracking-wide px-4 py-3 hidden sm:table-cell",children:"Tamanho"}),e.jsx("th",{className:"text-left text-xs font-semibold text-warm-500 uppercase tracking-wide px-4 py-3 hidden md:table-cell",children:"Sexo"}),e.jsx("th",{className:"text-left text-xs font-semibold text-warm-500 uppercase tracking-wide px-4 py-3 hidden lg:table-cell",children:"Idade"}),e.jsx("th",{className:"text-left text-xs font-semibold text-warm-500 uppercase tracking-wide px-4 py-3",children:"Estado"}),e.jsx("th",{className:"text-right text-xs font-semibold text-warm-500 uppercase tracking-wide px-5 py-3",children:"AÃ§Ãµes"})]})}),e.jsx("tbody",{className:"divide-y divide-warm-100",children:t.map(s=>e.jsxs("tr",{className:`hover:bg-warm-50 transition-colors ${s.is_adopted?"opacity-50":""}`,children:[e.jsx("td",{className:"px-5 py-3",children:e.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden bg-warm-100 flex-shrink-0",children:s.photo_url?e.jsx("img",{src:s.photo_url,alt:s.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-warm-300 text-lg",children:"ðŸ¶"})})}),e.jsx("td",{className:"px-5 py-3",children:e.jsx("span",{className:"font-semibold text-warm-900",children:s.name})}),e.jsx("td",{className:"px-4 py-3 hidden sm:table-cell",children:e.jsx("span",{className:"text-warm-600",children:B[s.size]??s.size})}),e.jsx("td",{className:"px-4 py-3 hidden md:table-cell",children:e.jsx("span",{className:"text-warm-600",children:s.sex?T[s.sex]:"â€”"})}),e.jsx("td",{className:"px-4 py-3 hidden lg:table-cell",children:e.jsx("span",{className:"text-warm-600",children:s.age||"â€”"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("button",{onClick:()=>u(s),disabled:z===s.id,className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold transition-colors ${s.is_adopted?"bg-nature-100 text-nature-700 hover:bg-nature-200":"bg-primary-100 text-primary-700 hover:bg-primary-200"}`,title:s.is_adopted?"Marcar como disponÃ­vel":"Marcar como adotado",children:[z===s.id?e.jsx(F,{size:"sm"}):e.jsx("span",{children:s.is_adopted?"âœ“":"â—‹"}),s.is_adopted?"Adotado":"DisponÃ­vel"]})}),e.jsx("td",{className:"px-5 py-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>x(s),className:"p-2 text-warm-500 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Editar",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:[e.jsx("path",{d:"M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"}),e.jsx("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"})]})}),e.jsx("button",{onClick:()=>y(s),className:"p-2 text-warm-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:e.jsx("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z",clipRule:"evenodd"})})})]})})]},s.id))})]})})}),e.jsxs("p",{className:"text-xs text-warm-400 text-center mt-6",children:[t.length," de ",a.length," cÃ£o(Ãµes) listados"]})]}),e.jsx("button",{onClick:l,className:"md:hidden fixed bottom-6 right-6 z-50 flex items-center justify-center w-14 h-14 bg-primary-500 hover:bg-primary-600 active:bg-primary-700 text-white rounded-full shadow-lg transition-colors","aria-label":"Adicionar CÃ£o",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-6 h-6",children:e.jsx("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})})})]})]})}function te(){const[a,r]=d.useState(!1),[l,x]=d.useState(!1),[o,m]=d.useState("dashboard"),[i,n]=d.useState(null),[h,S]=d.useState([]),[g,j]=d.useState(!1);d.useEffect(()=>{if(!c){r(!0);return}c.auth.getUser().then(({data:E})=>{x(!!E.user),r(!0)});const{data:{subscription:p}}=c.auth.onAuthStateChange((E,P)=>{x(!!P?.user)});return()=>p.unsubscribe()},[]),d.useEffect(()=>{l&&k()},[l]);async function k(){if(c){j(!0);try{const{data:p}=await c.from("dogs").select("*").order("created_at",{ascending:!1});S(p??[])}finally{j(!1)}}}async function z(){c&&(await c.auth.signOut(),x(!1),m("dashboard"))}function M(p){n(p),m("edit")}function A(){m("dashboard"),n(null),k()}function y(){m("dashboard"),n(null)}if(!a)return e.jsx("div",{className:"min-h-screen bg-warm-50 flex items-center justify-center",children:e.jsx(F,{size:"lg"})});if(!l)return e.jsx(K,{onLogin:()=>x(!0)});if(o==="add")return e.jsxs("div",{className:"min-h-screen bg-warm-50",children:[e.jsx("header",{className:"bg-white border-b border-warm-200 sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center gap-3",children:[e.jsx("button",{onClick:y,className:"p-2 text-warm-500 hover:text-warm-900 hover:bg-warm-100 rounded-lg transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-warm-900 text-sm",children:"Adicionar CÃ£o"}),e.jsx("p",{className:"text-warm-400 text-xs",children:"Novo registo"})]})]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"bg-white rounded-2xl border border-warm-200 shadow-sm p-6 sm:p-8",children:e.jsx(q,{initial:V,onSave:A,onCancel:y})})})]});if(o==="edit"&&i){const p={...V,name:i.name,size:i.size,sex:i.sex??"",age:i.age??"",description:i.description??""},E=i.description?Z(i.description,p):p;return e.jsxs("div",{className:"min-h-screen bg-warm-50",children:[e.jsx("header",{className:"bg-white border-b border-warm-200 sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center gap-3",children:[e.jsx("button",{onClick:y,className:"p-2 text-warm-500 hover:text-warm-900 hover:bg-warm-100 rounded-lg transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"font-bold text-warm-900 text-sm",children:["Editar: ",i.name]}),e.jsx("p",{className:"text-warm-400 text-xs",children:"Alterar informaÃ§Ãµes"})]})]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"bg-white rounded-2xl border border-warm-200 shadow-sm p-6 sm:p-8",children:e.jsx(q,{initial:E,existingDog:i,onSave:A,onCancel:y})})})]})}return g?e.jsxs("div",{className:"min-h-screen bg-warm-50 flex items-center justify-center gap-3 text-warm-500",children:[e.jsx(F,{size:"lg"}),e.jsx("span",{className:"font-medium",children:"A carregarâ€¦"})]}):e.jsx(ee,{dogs:h,onRefresh:k,onAdd:()=>m("add"),onEdit:M,onLogout:z})}export{te as default};
